 <!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Free Background Remover - EzGenTools</title>
    <style>
        /* ‡πÅ‡∏ï‡πà‡∏á‡∏´‡∏ô‡πâ‡∏≤‡∏ï‡∏≤‡∏ô‡∏¥‡∏î‡∏´‡∏ô‡πà‡∏≠‡∏¢‡πÉ‡∏´‡πâ‡∏î‡∏π‡∏î‡∏µ */
        body { font-family: sans-serif; text-align: center; padding: 20px; }
        .container { max-width: 800px; margin: 0 auto; }
        img { max-width: 100%; height: auto; border: 2px dashed #ccc; margin-top: 10px; min-height: 200px; }
        button { padding: 10px 20px; font-size: 16px; cursor: pointer; background-color: #ff69b4; color: white; border: none; border-radius: 5px; }
        button:disabled { background-color: #ccc; }
    </style>

<script type="importmap">
{
    "imports": {
        "lodash": "https://unpkg.com/lodash-es@4.17.21/lodash.js",
        "onnxruntime-web": "https://cdn.jsdelivr.net/npm/onnxruntime-web@1.14.0/dist/ort.es6.min.js"
    }
}
</script>
</head>
<body>

<div class="container">
    <h1>‚ú® AI ‡∏•‡∏ö‡∏û‡∏∑‡πâ‡∏ô‡∏´‡∏•‡∏±‡∏á (Local Version) ‚ú®</h1>
    
    <input type="file" id="imageInput" accept="image/*">
    <br><br>
    
    <button id="processBtn">üöÄ ‡∏•‡∏ö‡∏û‡∏∑‡πâ‡∏ô‡∏´‡∏•‡∏±‡∏á‡πÄ‡∏î‡∏µ‡πã‡∏¢‡∏ß‡∏ô‡∏µ‡πâ!</button>
    
    <hr>
    
    <h3>‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå:</h3>
    <img id="resultImage" src="" alt="‡∏£‡∏≠‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û..." style="max-width: 100%; display: none;">
    <p id="statusText" style="color: gray;">(‡∏£‡∏≠‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á...)</p>
</div>

<script type="module">
    // 1. ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡πÉ‡∏ä‡πâ‡πÑ‡∏ü‡∏•‡πå imgly.js ‡∏ó‡∏µ‡πà‡∏™‡∏≤‡∏°‡∏µ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏≤ (‡∏à‡∏≤‡∏Å‡πÇ‡∏ü‡∏•‡πÄ‡∏î‡∏≠‡∏£‡πå assets)
    import removeBackground from './assets/imgly.js';

    const fileInput = document.getElementById('imageInput');
    const processBtn = document.getElementById('processBtn');
    const resultImage = document.getElementById('resultImage');
    const statusText = document.getElementById('statusText');

    // ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏Å‡∏î‡∏õ‡∏∏‡πà‡∏° "‡∏•‡∏ö‡∏û‡∏∑‡πâ‡∏ô‡∏´‡∏•‡∏±‡∏á"
    processBtn.addEventListener('click', async () => {
        if (fileInput.files.length === 0) {
            alert("‡∏ó‡∏µ‡πà‡∏£‡∏±‡∏Å! ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏£‡∏π‡∏õ‡∏Å‡πà‡∏≠‡∏ô‡∏™‡∏¥‡∏Ñ‡∏∞!");
            return;
        }

        const imageFile = fileInput.files[0];
        
        try {
            // ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ó‡∏≥‡∏á‡∏≤‡∏ô
            statusText.innerText = "‚è≥ ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏Ñ‡∏¥‡∏î‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå... (‡∏£‡∏≠‡πÅ‡∏õ‡πä‡∏ö‡∏ô‡∏∞)";
            processBtn.disabled = true; // ‡∏•‡πá‡∏≠‡∏Å‡∏õ‡∏∏‡πà‡∏°‡∏Å‡∏±‡∏ô‡∏Å‡∏î‡∏£‡∏±‡∏ß

            // --- ‚ú® ‡∏´‡∏±‡∏ß‡πÉ‡∏à‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç (Config) ‚ú® ---
            const config = {
                // ‡∏ö‡∏≠‡∏Å AI ‡∏ß‡πà‡∏≤ "‡πÑ‡∏ü‡∏•‡πå‡∏™‡∏°‡∏≠‡∏á (shards) ‡∏≠‡∏¢‡∏π‡πà‡∏ó‡∏µ‡πà‡πÇ‡∏ü‡∏•‡πÄ‡∏î‡∏≠‡∏£‡πå‡∏ô‡∏µ‡πâ‡∏ô‡∏∞"
                publicPath: './assets/', 
                // ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏° (‡∏ñ‡πâ‡∏≤‡∏≠‡∏¢‡∏≤‡∏Å‡πÑ‡∏î‡πâ Debug)
                debug: true, 
                progress: (key, current, total) => {
                    console.log(`Downloading ${key}: ${current} of ${total}`);
                }
            };

            // ‡∏™‡∏±‡πà‡∏á‡∏•‡∏ö‡∏û‡∏∑‡πâ‡∏ô‡∏´‡∏•‡∏±‡∏á! (‡∏™‡πà‡∏á‡πÑ‡∏ü‡∏•‡πå‡∏£‡∏π‡∏õ + config ‡πÑ‡∏õ)
            const blob = await removeBackground(imageFile, config);
            
            // ‡πÅ‡∏õ‡∏•‡∏á‡∏Å‡πâ‡∏≠‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• (Blob) ‡πÄ‡∏õ‡πá‡∏ô‡∏•‡∏¥‡∏á‡∏Å‡πå‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û
            const url = URL.createObjectURL(blob);
           
            resultImage.src = url;
resultImage.style.display = "block"; // ‚ú® ‡∏™‡∏±‡πà‡∏á‡πÉ‡∏´‡πâ‡πÇ‡∏ä‡∏ß‡πå‡∏ï‡∏±‡∏ß‡∏≠‡∏≠‡∏Å‡∏°‡∏≤!
            statusText.innerText = "‚úÖ ‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢! ‡∏™‡∏ß‡∏¢‡πÄ‡∏ä‡πâ‡∏á‡∏ß‡∏±‡∏ö!";
            statusText.style.color = "green";

        } catch (error) {
            console.error("‡πÄ‡∏°‡∏µ‡∏¢‡∏à‡πã‡∏≤! ‡∏°‡∏µ Error:", error);
            statusText.innerText = "‚ùå ‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î (‡∏î‡∏π Console F12 ‡πÄ‡∏£‡πá‡∏ß!)";
            statusText.style.color = "red";
            alert("‡πÄ‡∏Å‡∏¥‡∏î Error ‡∏Ñ‡πà‡∏∞‡∏ó‡∏µ‡πà‡∏£‡∏±‡∏Å! ‡∏•‡∏≠‡∏á‡∏Å‡∏î F12 ‡∏î‡∏π‡∏ã‡∏¥‡∏ß‡πà‡∏≤‡∏°‡∏±‡∏ô‡∏ü‡πâ‡∏≠‡∏á‡∏ß‡πà‡∏≤‡∏≠‡∏∞‡πÑ‡∏£?");
        } finally {
            processBtn.disabled = false; // ‡∏õ‡∏•‡∏î‡∏•‡πá‡∏≠‡∏Å‡∏õ‡∏∏‡πà‡∏°
        }
    });
</script>

</body>
</html>
